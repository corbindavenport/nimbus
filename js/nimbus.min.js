$(document).ready(function(){function a(a){var t="";return 0==a?t="wi-tornado":1==a||45==a?t="wi-storm-showers":2==a?t="wi-lightning":3==a||4==a||47==a?t="wi-thunderstorm":5==a||46==a?t="wi-rain-mix":6==a||7==a||13==a||14==a||18==a||36==a?t="wi-sleet":8==a||9==a||10==a||11==a||12==a?t="wi-showers":15==a||41==a||42==a||43==a?t="wi-snow":16==a?t="wi-snow-wind":17==a?t="wi-hail":19==a?t="wi-dust":20==a?t="wi-fog":21==a?t="wi-day-haze":22==a?t="wi-smoke":23==a||24==a?t="wi-windy":25==a?t="wi-snowflake-cold":26==a?t="wi-cloud":27==a||29==a?t="wi-night-cloudy":28==a||30==a?t="wi-day-cloudy":31==a||33==a||44==a?t="wi-stars":32==a||34==a?t="wi-day-sunny":36==a?t="wi-hot":37==a||38==a||39==a?t="wi-thunderstorm":40==a?t="wi-showers":3200==a&&(t="wi-alien"),t}$("ul.tabs").tabs(),$("#current").hide(),$("select").material_select(),null===localStorage.getItem("weather")?(localStorage.weather="10001",localStorage.nimbus="2.0",$("#welcome").openModal()):"2.0"!=localStorage.getItem("nimbus")&&$("#new").openModal(),null===localStorage.getItem("unit")&&(localStorage.unit="f"),null===localStorage.getItem("radar-quality")&&(localStorage["radar-quality"]=null===localStorage.getItem("radar")?"1":localStorage.radar),null===localStorage.getItem("radar-location")&&(localStorage["radar-location"]=""),null===localStorage.getItem("color")?localStorage.color="#3ca2eb":"#13A38D"===localStorage.getItem("color")&&(localStorage.color="#3ca2eb"),null===localStorage.getItem("bg")&&(localStorage.bg=""),(null===localStorage.getItem("analytics")||"yes"===localStorage.getItem("analytics"))&&(localStorage.analytics="true"),$("#location").val(localStorage.weather),$("#unit").val(localStorage.unit),$("#radar-location").val(localStorage["radar-location"]),$("#radar-quality").val(localStorage["radar-quality"]),$("#color").val(localStorage.color),$("#bg").val(localStorage.bg),$("#analytics").prop("checked",JSON.parse(localStorage.analytics)),"true"==localStorage.getItem("analytics")&&(!function(a,t,e,o,c,l,r){a.GoogleAnalyticsObject=c,a[c]=a[c]||function(){(a[c].q=a[c].q||[]).push(arguments)},a[c].l=1*new Date,l=t.createElement(e),r=t.getElementsByTagName(e)[0],l.async=1,l.src=o,r.parentNode.insertBefore(l,r)}(window,document,"script","http://www.google-analytics.com/analytics.js","ga"),ga("create","UA-59452245-1","auto"),ga("send","pageview")),localStorage.getItem("bg").length>0&&$(".content").css("background","url("+localStorage.getItem("bg")+") center no-repeat","important"),$("#tabs").css("background",localStorage.color,"important"),$(".tabs").css("background",localStorage.color,"important"),$(".tab a").css("background",localStorage.color,"important"),$(".credit").css("color",localStorage.color,"important"),$(".title").css("color",localStorage.color,"important"),$(".secondary-content").css("color",localStorage.color,"important"),$(".settings-save").css("background",localStorage.color,"important"),$(".btn").css("background",localStorage.color,"important"),$(".btn").css("background",localStorage.color,"important"),$(".spinner-layer").css("border-color",localStorage.color,"important"),$(document).on("click",".settings-trigger",function(){$("#settings").fadeIn("slow",function(){})}),$(".twitterlink").click(function(){window.open("https://twitter.com/NimbusWeather","_blank")}),$(".googlelink").click(function(){window.open("https://plus.google.com/107563170995027312930","_blank")}),$(".githublink").click(function(){window.open("https://github.com/corbindavenport/nimbus","_blank")}),$(".location-item").click(function(){$("#location-modal").openModal(),$("#location").select()}),$(".units-item").click(function(){$("#units-modal").openModal()}),$(".reset-item").click(function(){$("#reset-modal").openModal()}),$(".reset-confirm").click(function(){localStorage.weather="10001",localStorage.unit="f",localStorage["radar-quality"]="1",localStorage["radar-location"]="",localStorage.color="#3ca2eb",localStorage.bg="",localStorage.analytics="true",window.location.replace("index.html")}),$(".radar-location-item").click(function(){$("#radar-location-modal").openModal(),$("#radar-location").select()}),$(".radar-quality-item").click(function(){$("#radar-quality-modal").openModal()}),$(".hex-item").click(function(){$("#hex-modal").openModal(),$("#color").select()}),$(".picker-item").click(function(){$("#picker-modal").openModal()}),$(".color-reset").click(function(){document.getElementById("color").value="#3ca2eb",Materialize.toast("Color reset!",3e3,"rounded")}),$(".background-item").click(function(){$("#background-modal").openModal(),$("#bg").select()}),$(".privacy").click(function(){$("#privacymodal").openModal()}),$(".paypal").click(function(){$("#paypalmodal").openModal()}),$(".bitcoin").click(function(){$("#bitcoinmodal").openModal()}),$(".settings-save").click(function(){$("#location").val().length>"0"&&null!=$("#radar-location").val().match(/^\d+$/)||""===$("#radar-location").val()?(localStorage.weather=$("#location").val(),localStorage.unit=$("#unit").val(),localStorage["radar-location"]=$("#radar-location").val(),localStorage["radar-quality"]=$("#radar-quality").val(),localStorage.color=$("#color").val(),localStorage.bg=$("#bg").val(),localStorage.analytics=$("#analytics").is(":checked")?"true":"false",window.location.replace("index.html")):toast("Enter a valid location!",3e3,"rounded")});$.simpleWeather({location:localStorage.weather,woeid:"",unit:localStorage.unit,success:function(t){current='<div class="card"><div class="card-content"><span class="card-title">'+t.city+", "+t.region+'</span><table><tr><th class="weather-icon"><i class="wi '+a(t.code)+'"></i></th><th class="weather-info"><span class="temp">'+t.temp+"&deg;"+t.units.temp+"</span><br />"+t.high+"&deg;"+t.units.temp+" / "+t.low+"&deg;"+t.units.temp+'</th></tr></table><div class="weather-updated">Last updated '+t.updated+'</div></div></div><div class="card"><div class="card-content"><span class="card-title">Winds</span><p><b>Wind chill:</b> '+t.wind.chill+"&deg;"+t.units.temp+"<p><b>Speed:</b> "+t.wind.speed+" "+t.units.speed+" "+t.wind.direction+'</div></div><div class="card"><div class="card-content"><span class="card-title">Daylight</span><p><b>Sunrise:</b> '+t.sunrise+"</p><p><b>Sunset:</b> "+t.sunset+"</p><p><b>Visibility:</b> "+t.visibility+" "+t.units.distance+'</p></div></div><div class="card"><div class="card-content"><div class="row"><button type="submit" name="action" class="btn-flat col s12 m6" id="share-twitter">Share on Twitter<i class="mdi-content-send right"></i></button><button type="submit" name="action" class="btn-flat col s12 m6" id="share-tumblr">Share on Tumblr<i class="mdi-content-send right"></i></button></div></div></div><div class="card"><a class="btn-flat btn-large waves-effect settings-trigger" href="#">Open Settings</a></div>',$("#current").append(current),forecast='<div id="forecast-container"><div class="card forecast1"><div class="card-content"><span class="card-title">Forecast on '+t.forecast[0].day+'</span><table><tr><th class="forecast-icon"><i class="wi '+a(t.forecast[0].code)+'"></i></th><th class="forecast-info"><span class="temp">'+t.forecast[0].high+"&deg;"+t.units.temp+" / "+t.forecast[0].low+"&deg;"+t.units.temp+"</span><br />"+t.forecast[0].text+'</th></tr></table></div></div><div class="card forecast2"><div class="card-content"><span class="card-title">Forecast on '+t.forecast[1].day+'</span><table><tr><th class="forecast-icon"><i class="wi '+a(t.forecast[1].code)+'"></i></th><th class="forecast-info"><span class="temp">'+t.forecast[1].high+"&deg;"+t.units.temp+" / "+t.forecast[1].low+"&deg;"+t.units.temp+"</span><br />"+t.forecast[1].text+'</th></tr></table></div></div><div class="card forecast3"><div class="card-content"><span class="card-title">Forecast on '+t.forecast[2].day+'</span><table><tr><th class="forecast-icon"><i class="wi '+a(t.forecast[2].code)+'"></i></th><th class="forecast-info"><span class="temp">'+t.forecast[2].high+"&deg;"+t.units.temp+" / "+t.forecast[2].low+"&deg;"+t.units.temp+"</span><br />"+t.forecast[2].text+'</th></tr></table></div></div><div class="card forecast4"><div class="card-content"><span class="card-title">Forecast on '+t.forecast[3].day+'</span><table><tr><th class="forecast-icon"><i class="wi '+a(t.forecast[3].code)+'"></i></th><th class="forecast-info"><span class="temp">'+t.forecast[3].high+"&deg;"+t.units.temp+" / "+t.forecast[3].low+"&deg;"+t.units.temp+"</span><br />"+t.forecast[3].text+'</th></tr></table></div></div><div class="card forecast5"><div class="card-content"><span class="card-title">Forecast on '+t.forecast[4].day+'</span><table><tr><th class="forecast-icon"><i class="wi '+a(t.forecast[4].code)+'"></i></th><th class="forecast-info"><span class="temp">'+t.forecast[4].high+"&deg;"+t.units.temp+" / "+t.forecast[4].low+"&deg;"+t.units.temp+"</span><br />"+t.forecast[4].text+"</th></tr></table></div></div></div>",$("#forecast").append(forecast);var e="It's currently "+t.temp+"Â°"+t.units.temp+" and "+t.currently+" in "+t.city+" right now!";if($("#share-twitter").click(function(){window.open("https://twitter.com/intent/tweet?via=NimbusWeather&text="+encodeURIComponent(e),"Twitter","width=500,height=300,scrollbars=0")}),$("#share-tumblr").click(function(){window.open("https://www.tumblr.com/share?s=&v=3&t="+encodeURIComponent(e),"Tumblr","width=500,height=300,scrollbars=0")}),"United States"===t.country)if(""!==localStorage.getItem("radar-location")){var o=$("#map").width()*localStorage["radar-quality"],c=$("#map").height()*localStorage["radar-quality"],l="http://www.tephigram.weather.net/cgi-bin/razradar.cgi?zipcode="+localStorage["radar-location"];$("#map").css("background","url("+l+"&width="+o+"&height="+c+") #000000 bottom center no-repeat")}else $("#map").html('<div class="card"><div class="card-content"><span class="card-title">Map not configured</span><p>Due to an API limitation, you need to configure the location for the radar map seperately. Go to the settings and set a radar location.</p></div></div>');else $("#map").html('<div class="card"><div class="card-content"><span class="card-title">Map unavailable</span><p>Due to an API limitation, radar maps are not available for locations outside the United States. This is being worked on, and may be available in a future update.</p></div></div>')},error:function(){$("#current").html('<div class="card"><div class="card-content"><span class="card-title">Error</span><p>There was an error loading the weather.</p></div><div class="card-action"><a href="javascript:window.location.replace('+index+');">Try again</a></div></div><div class="card"><a class="btn-flat btn-large waves-effect settings-trigger" href="#">Open Settings</a></div>'),$("#forecast").html('<div class="card"><div class="card-content"><span class="card-title">Error</span><p>There was an error loading the forecast.</p></div><div class="card-action"><a href="javascript:window.location.replace('+index+');">Try again</a></div></div><div class="card"><a class="btn-flat btn-large waves-effect settings-trigger" href="#">Open Settings</a></div>'),$("#map").html('<div class="card"><div class="card-content"><span class="card-title">Error</span><p>There was an error loading the radar map.</p></div><div class="card-action"><a href="javascript:window.location.replace('+index+');">Try again</a></div></div><div class="card"><a class="btn-flat btn-large waves-effect settings-trigger" href="#">Open Settings</a></div>')}})}),$(window).load(function(){$(".preloader-wrapper").fadeOut("slow",function(){}),$("#current").fadeIn("slow",function(){}),$("#settings-trigger").fadeIn("slow",function(){}),$("#colorpicker").farbtastic("#color")});